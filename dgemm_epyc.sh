#!/bin/bash
#SBATCH --chdir=/u/dssc/mdepet00/assignment/exercise2
#SBATCH --partition=EPYC
#SBATCH --job-name=dgemm_mkl_epyc
#SBATCH --nodes=1
#SBATCH --ntasks-per-node 64
#SBATCH --mem=490G
#SBATCH --time=02:00:00
#SBATCH --output=dgemm_mkl_epyc_job_%j.out

module load architecture/AMD
#module load openMPI/4.1.4/gnu (needed?)
module load mkl
module load openBLAS/0.3.21-omp

#hpl: export codes=/u/path_to/hpl-2.3/bin/epyc
#hpl: mpirun -np 128 --map-by core $codes/xhpl

now=`date +"%Y-%m-%d_%H-%M-%S"`
csvname=dgemm_mkl_epyc_$now.csv
echo "$csvname `hostname` $now"

#increase the size of matrices size from 2000x2000 to 20000x20000 (single precision) and analyse the scaling of the GEMM calculation for at least MKL and openblas.
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 2000 2000 200 >discarded_first_result_$csvname
echo "$csvname `hostname` $now" >$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 20000 20000 20000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 20000 20000 20000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 20000 20000 20000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl.x 20000 20000 20000 >>$csvname

now=`date +"%Y-%m-%d_%H-%M-%S"`
csvname=dgemm_mkl_epyc_optimized_$now.csv
echo "$csvname `hostname` $now"

#increase the size of matrices size from 2000x2000 to 20000x20000 (single precision) and analyse the scaling of the GEMM calculation for at least MKL and openblas.
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 2000 2000 2000 >discarded_first_result_$csvname
echo "$csvname `hostname` $now" >$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 20000 20000 20000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 20000 20000 20000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 20000 20000 20000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_mkl_optimized.x 20000 20000 20000 >>$csvname

now=`date +"%Y-%m-%d_%H-%M-%S"`
csvname=dgemm_oblas_epyc_$now.csv
echo "$csvname `hostname` $now"

#increase the size of matrices size from 2000x2000 to 20000x20000 (single precision) and analyse the scaling of the GEMM calculation for at least MKL and openblas.
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 2000 2000 200 >discarded_first_result_$csvname
echo "$csvname `hostname` $now" >$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 20000 20000 20000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 20000 20000 20000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 20000 20000 20000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas.x 20000 20000 20000 >>$csvname

now=`date +"%Y-%m-%d_%H-%M-%S"`
csvname=dgemm_oblas_epyc_optimized_$now.csv
echo "$csvname `hostname` $now"

#increase the size of matrices size from 2000x2000 to 20000x20000 (single precision) and analyse the scaling of the GEMM calculation for at least MKL and openblas.
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 2000 2000 200 >discarded_first_result_$csvname
echo "$csvname `hostname` $now" >$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 2000 2000 2000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 2500 2500 2500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 3000 3000 3000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 3500 3500 3500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 4000 4000 4000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 4500 4500 4500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 5000 5000 5000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 5500 5500 5500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 6000 6000 6000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 6500 6500 6500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 7000 7000 7000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 7500 7500 7500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 8000 8000 8000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 8500 8500 8500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 9000 9000 9000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 9500 9500 9500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 10000 10000 10000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 10500 10500 10500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 11000 11000 11000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 11500 11500 11500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 12000 12000 12000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 12500 12500 12500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 13000 13000 13000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 13500 13500 13500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 14000 14000 14000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 14500 14500 14500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 15000 15000 15000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 15500 15500 15500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 16000 16000 16000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 16500 16500 16500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 17000 17000 17000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 17500 17500 17500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 18000 18000 18000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 18500 18500 18500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 19000 19000 19000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 19500 19500 19500 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 20000 20000 20000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 20000 20000 20000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 20000 20000 20000 >>$csvname
srun -n1 --cpus-per-task=64  ./dgemm_oblas_optimized.x 20000 20000 20000 >>$csvname

now=`date +"%Y-%m-%d_%H-%M-%S"`
echo "`hostname` $now END"
